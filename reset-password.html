<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cormac Farrelly - Request Password Reset</title>
    <meta name="description" content="Request a password reset link for Cormac Farrelly's site. Secure your account.">
    <meta name="keywords" content="password reset, request link, Cormac Farrelly">
    <meta name="author" content="Cormac Farrelly">
    <meta name="robots" content="index, follow">

    <!-- Stylesheets and scripts -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="img/NFT.ico" type="image/x-icon">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>

<body>
    <!-- Header and navigation -->
    <header>
        <nav class="navbar navbar-fixed-top navbar-inverse">
            <div class="container">
                <!-- Navbar toggle button -->
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- Navbar content -->
                <div class="collapse navbar-collapse" id="navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/index" title="">01: Home</a></li>
                        <li><a href="/resume" title="">02: Resume</a></li>
                        <li><a href="/blog" title="">03: Blog</a></li>
                        <li><a href="/github" title="">04: GitHub</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <div class="login-button" id="loginStatus">
        <!-- User login status will be injected here by script -->
    </div>


    <!-- Main content container -->
    <div class="section-container">
        <div class="container">
            <div class="row resume-row-label">
                <div class="col-xs-12">
                    <div class="template-example">
                        <h1 class="template-title-example">Request Password Reset</h1>
                        <p class="category-description">Enter your email address to receive a password reset link.</p>

                        <!-- Password Reset Request Form -->
                        <form id="resetPasswordForm">
                            <input type="password" id="newPassword" placeholder="Enter your new password" required />
                            <button type="submit">Reset Password</button>
                            <p id="resetMessage"></p>
                          </form>
                          
                          <script>
                            document.getElementById('resetPasswordForm').addEventListener('submit', async (event) => {
                              event.preventDefault();
                          
                              const newPassword = document.getElementById('newPassword').value;
                          
                              try {
                                const response = await fetch('/reset-password', {
                                  method: 'POST',
                                  headers: { 'Content-Type': 'application/json' },
                                  body: JSON.stringify({ newPassword }) // Token should also be sent
                                });
                          
                                const data = await response.json();
                          
                                if (response.ok) {
                                  document.getElementById('resetMessage').textContent = 'Password reset successful!';
                                  window.location.href = '/login.html'; // Redirect to login page after reset
                                } else {
                                  document.getElementById('resetMessage').textContent = data.message;
                                }
                              } catch (error) {
                                console.error('Error:', error);
                                document.getElementById('resetMessage').textContent = 'Error occurred. Try again.';
                              }
                            });
                          </script>
                          

    <!-- Footer -->
    <div class="footer-container">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 text-center">
                    <p>Inspired by free time</p>
                    <p>This project was developed with the help of AI tools, using them as a guide, assistant, and for significant code generation. All final creative decisions and deployments reflect my own work and intentions.</p>
                    <p>Â© Cormac Farrelly 2024</p>
                </div>
            </div>
        </div>
    </div>
</body>

</html>